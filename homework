#include<iostream>
#include<string>
#include<fstream>
#include<vector>
#include<algorithm>

using namespace std;

//ï¿½È–ï¿½ï¿½Aï¿½Ôï¿½(ï¿½ï¿½ï¿½ï¿½ï¿½å‚«ï¿½ï¿½ï¿½Ù‚Ç–ï¿½ï¿½ï¿½ß‚Ì‹ï¿½)
class Spitz {
public:
	Spitz() {}
	void songname(string title) { _title = title; }
	void number(int num) { _num = num; }
	//void show() { cout << "ï¿½È–ï¿½:" << _title << "\tï¿½È‚Ì–ï¿½ï¿½é‚³:" << _num << endl; }
	int _num = 0;
	string _title;
};

//ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ß“xï¿½ğ”’lï¿½ï¿½(ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ù‚Ç‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ß‚Ì‹ï¿½)
class reco_Spitz :public Spitz {
public:
	void recomemend(int reco) { _reco = reco; }
	void show() { cout << "ï¿½È–ï¿½:" << _title << "\tï¿½È‚Ì–ï¿½ï¿½é‚³" << _num << "\tï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ß“x" << _reco << endl; }
	int _reco = 0;
};

vector<reco_Spitz> spitz;
int NUMBER;
int RECOMMEND;

//ï¿½ï¿½Oï¿½ğ“Š‚ï¿½ï¿½ï¿½Öï¿½
void wrongNUM(int NUMBER ) {
	if (NUMBER < 5 || NUMBER >(int)spitz.size() - 5) {
		throw runtime_error("NUMBERï¿½É‚ï¿½5ï¿½ï¿½ï¿½ï¿½Sï¿½Èï¿½-5ï¿½ÌŠÔ‚Ìï¿½ï¿½ï¿½ï¿½ï¿½Í‚ï¿½ï¿½Ä‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½");
	}
}
//ï¿½ï¿½Oï¿½ğ“Š‚ï¿½ï¿½ï¿½Öï¿½
void wrongRECO(int RECOMMEND){
	if (RECOMMEND < 5 || RECOMMEND >(int)spitz.size() - 5) {
		throw runtime_error("RECOMMENDï¿½É‚ï¿½5ï¿½ï¿½ï¿½ï¿½Sï¿½Èï¿½-5ï¿½ÌŠÔ‚Ìï¿½ï¿½ï¿½ï¿½ï¿½Í‚ï¿½ï¿½Ä‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½");
	}
}

int main(){
	string type;
	cout << "rock,good,relaxï¿½Ì’ï¿½ï¿½ï¿½ï¿½ï¿½typeï¿½ï¿½Iï¿½ï¿½Å‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½B";
	cin >> type; //ï¿½^ï¿½Cï¿½vï¿½Iï¿½ï¿½(rock,good,relaxï¿½Ì‚ï¿½ï¿½ï¿½ï¿½ê‚©ï¿½ï¿½ï¿½ï¿½ï¿½)
	if (type == "rock") {
		ifstream infile("rock.txt");
		cout << "ï¿½Èï¿½:96\n";

		string title;
		int num, reco;
		while (infile >> title >> num >> reco) {
			spitz.emplace_back();
			spitz[spitz.size() - 1].songname(title);
			spitz[spitz.size() - 1].number(num);
			spitz[spitz.size() - 1].recomemend(reco);
		}
		infile.close();
	}

	else if (type == "good") {
		ifstream infile("good.txt");
		cout << "ï¿½Èï¿½:108\n";

		string title;
		int num, reco;
		while (infile >> title >> num >> reco) {
			spitz.emplace_back();
			spitz[spitz.size() - 1].songname(title);
			spitz[spitz.size() - 1].number(num);
			spitz[spitz.size() - 1].recomemend(reco);
		}
		infile.close();
	}

	else if (type == "relax") {
		ifstream infile("relax.txt");
		cout << "ï¿½Èï¿½:43\n";

		string title;
		int num, reco;
		while (infile >> title >> num >> reco) {
			spitz.emplace_back();
			spitz[spitz.size() - 1].songname(title);
			spitz[spitz.size() - 1].number(num);
			spitz[spitz.size() - 1].recomemend(reco);
		}
		infile.close();
	}

	else {
		cout << "ï¿½Yï¿½ï¿½ï¿½È‚ï¿½ï¿½Å‚ï¿½ï¿½Bï¿½ï¿½è’¼ï¿½ï¿½ï¿½Ä‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½B" << endl;
		return 0;
	}

	string str;
	cout << "num,recoï¿½Ì‚ï¿½ï¿½ï¿½ï¿½ê‚©ï¿½ï¿½Iï¿½ï¿½ï¿½ï¿½ï¿½Ä‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½(numï¿½ï¿½ï¿½È‚Ì–ï¿½ï¿½é‚³ï¿½Arecoï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ß“x)ï¿½B";
	cin >> str; //ï¿½È‚Ì–ï¿½ï¿½é‚³ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ß“xï¿½Ì‘Iï¿½ï¿½(num,recoï¿½Ì‚Ç‚ï¿½ï¿½ç‚©ï¿½ï¿½ï¿½ï¿½ï¿½)
	if (str == "num") {
		sort(spitz.begin(), spitz.end(), [](const reco_Spitz& x, const reco_Spitz& y) {
			return x._num < y._num;
			});

		cout << "5ï¿½ï¿½ï¿½ï¿½Èï¿½-5ï¿½Ü‚Å‚Ìï¿½ï¿½ï¿½ï¿½ï¿½Í‚ï¿½ï¿½Ä‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Bï¿½å‚«ï¿½ï¿½ï¿½ï¿½ï¿½Ù‚Ç–ï¿½ï¿½é‚¢ï¿½È‚Å‚ï¿½ï¿½B";
		cin >> NUMBER; //5ï¿½ï¿½ï¿½ï¿½Èï¿½-5ï¿½Ü‚Å‚Ìï¿½ï¿½ï¿½ï¿½ï¿½ï¿½

		try {
			wrongNUM( NUMBER );
		}
		catch (exception& e) {
			cerr << e.what() << endl;
			return 0;
		}

		cout << "\n" << "ï¿½Xï¿½sï¿½bï¿½cï¿½Ì–ï¿½ï¿½é‚¢ï¿½Èï¿½ï¿½vï¿½ï¿½ï¿½Cï¿½ï¿½ï¿½Xï¿½g\n";
		for (int i = (NUMBER-5);i < (NUMBER+5);i++) {
			spitz[i].show();
		}
	}

	else if (str == "reco") {
		sort(spitz.begin(), spitz.end(), [](const reco_Spitz& x, const reco_Spitz& y) {
			return x._reco < y._reco;
			});

		cout << "5ï¿½ï¿½ï¿½ï¿½Èï¿½-4ï¿½Ü‚Å‚Ìï¿½ï¿½ï¿½ï¿½ï¿½Í‚ï¿½ï¿½Ä‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Bï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ù‚Ç‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ß‚Ì‹È‚Å‚ï¿½ï¿½B";
		cin >> RECOMMEND; //5ï¿½ï¿½ï¿½ï¿½Èï¿½-5ï¿½Ü‚Å‚Ìï¿½ï¿½ï¿½ï¿½ï¿½ï¿½

		try {
			wrongRECO( RECOMMEND );
		}
		catch (exception& e) {
			cerr << e.what() << endl;
			return 0;
		}

		cout << "\n" << "ï¿½Xï¿½sï¿½bï¿½cï¿½Ì‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ß‹Èï¿½ï¿½vï¿½ï¿½ï¿½Cï¿½ï¿½ï¿½Xï¿½g\n";
		for (int i = (RECOMMEND-5);i < (RECOMMEND+5);i++) {
			spitz[i].show();
		}
	}

	else {
		cout << "ï¿½Yï¿½ï¿½ï¿½È‚ï¿½ï¿½Å‚ï¿½ï¿½Bï¿½ï¿½è’¼ï¿½ï¿½ï¿½Ä‚ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½B" << endl;
	}

	return 0;
}
